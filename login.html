<!DOCTYPE html>
<html>

<head>
    <title>Ecommerce login</title>
    <link rel="stylesheet" type="text/css" href="css/login.css">
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
</head>

<body>
    <div class="main">
        <input type="checkbox" id="chk" aria-hidden="true">

        <div class="signup">
            <form>
                <label for="chk" aria-hidden="true">Login</label>
                <input id="email" type="email" name="email" placeholder="Email" required="">
                <input id="password" name="pswd" placeholder="Password" required="">
                <button type="button" href="forget.html">Forget Password</button>
                <button onclick="loginUser()" type="button">Login</button>
            </form>
        </div>


    </div>

    <script type="text/javascript">
        let chekUserLogout = JSON.parse(localStorage.getItem('UserLogin'));
        if (chekUserLogout) {
            alert('Plese Logout First');
            window.location.href = "menu.html"
        }
        const loginUser = () => {

            let email = document.getElementById('email').value;
            let password = document.getElementById('password').value;

            let val = JSON.parse(localStorage.getItem('user'));
            let check = 0;
            val.map((v) => {
                if (v.email == email && v.password == password) {
                    check = 1;
                    let obj = {
                        id: v.id,
                        name: v.name,
                        email: v.email,
                        password: v.password,
                        role: v.role,
                    }
                    localStorage.setItem('UserLogin', JSON.stringify(obj))
                    return false;
                }
            })

            if (check == 1) {
                alert('User Login succesfully');
                window.location.href = "menu.html"
            } else {
                alert('Email , password and role are invalid');
            }
        }


    </script>

</body>

</html>